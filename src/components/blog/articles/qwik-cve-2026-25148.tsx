// src/components/blog/articles/qwik-cve-2026-25148.tsx

import { component$ } from "@builder.io/qwik";
import { Link } from "@builder.io/qwik-city";
import MetaQwikCVE2026 from "~/assets/img/qwik-cve-2026/metaQwikCVE2026.png?jsx";
import { DesktopStickyAd } from "~/components/desktopStickyAd/desktopStickyAd";
import { MobileStickyAd } from "~/components/mobileStickyAd/mobileStickyAd";
import { ArticleDiscordCallout } from "~/components/UI/articleDiscordCallout/articleDiscordCallout";
import { BackButton } from "~/components/UI/backButton/backButton";
import CodeBlock from "~/components/UI/codeBlock/codeBlock";
import { useProfile } from "~/routes/layout";
import { isSubscriptionActive } from "~/utils/subscription";

export const QwikCVE202625148Article = component$(() => {
  const profile = useProfile();
  const isSubscribed = isSubscriptionActive(profile.value);

  return (
    <main class="relative flex min-h-screen w-full flex-col items-center gap-8 bg-white py-12 md:px-12 md:py-20">
      <header class="flex flex-col items-center gap-2 px-4 md:gap-4">
        <h1 class="max-w-[90%] text-center text-3xl font-bold md:max-w-[100%] md:text-5xl">
          CVE-2026-25148: Understanding the XSS Vulnerability Fixed in Qwik
          1.19.0
        </h1>
        <h2 class="max-w-[80%] text-center text-2xl font-semibold text-gray-800 md:max-w-[100%] md:text-4xl">
          What was affected, who is concerned, and why updating is enough
        </h2>
        <p class="mt-2 max-w-xl text-center text-gray-700">
          Qwik 1.19.0 does not only improve performance and developer
          experience. It also fixes a security vulnerability identified as
          CVE-2026-25148. This article explains what it means, without panic or
          hype.
        </p>
      </header>

      <div class="relative flex w-full max-w-screen-lg flex-col justify-center gap-4 px-4 md:flex-row">
        <div class="flex w-full flex-col gap-4 md:max-w-[calc(100%-300px)]">
          <div class="flex flex-col gap-6 rounded-lg bg-white p-6 pt-0 shadow-md">
            <article class="prose prose-lg max-w-none text-gray-800">
              <figure>
                <MetaQwikCVE2026
                  class="h-full w-full object-contain object-center"
                  alt="Security advisory CVE-2026-25148 fixed in Qwik 1.19.0"
                />
                <figcaption class="mt-2 text-center text-sm text-gray-500">
                  Security advisory: CVE-2026-25148 fixed in Qwik 1.19.0
                </figcaption>
              </figure>

              <h3>Why this article exists</h3>
              <p>
                Security advisories often sound more alarming than they actually
                are. When developers see a CVE number, the first reaction is
                often uncertainty: is this critical, is my application exposed,
                do I need to worry?
              </p>
              <p>
                CVE-2026-25148 was reported and fixed in Qwik 1.19.0. This
                article exists to explain what was affected, what was not, and
                what action is realistically required.
              </p>

              <h3>What is a CVE?</h3>
              <p>
                CVE stands for <em>Common Vulnerabilities and Exposures</em>. It
                is a public identifier assigned to a real, documented security
                vulnerability.
              </p>
              <p>
                A CVE is not a rumor, not speculation, and not marketing. It is
                a reference that allows security tools, auditors, and developers
                to talk about the same issue using a shared identifier.
              </p>

              <h3>What was the vulnerability?</h3>
              <p>
                CVE-2026-25148 is a Cross-Site Scripting (XSS) vulnerability
                that affected Qwik applications using server-side rendering
                (SSR) prior to version 1.19.0.
              </p>
              <p>
                The issue was related to how Qwik internally serialized certain
                <strong>virtual attributes</strong> when generating HTML on the
                server. In very specific scenarios, user-influenced data could
                end up being injected into the rendered HTML without proper
                neutralization.
              </p>
              <p>
                If exploited, this could allow an attacker to inject JavaScript
                code that would execute in the browser of a visiting user.
              </p>

              <h3>Why SSR matters here</h3>
              <p>
                In server-side rendering, HTML is generated before it reaches
                the browser. This means the server must be extremely careful
                when transforming dynamic values into markup.
              </p>
              <p>
                Qwik, like all SSR frameworks, performs internal serialization
                steps that developers do not explicitly control. This
                vulnerability existed in that internal layer, not in typical
                user-written application code.
              </p>

              <h3>Who is actually affected?</h3>
              <p>
                An application could only be affected if all of the following
                conditions were true:
              </p>
              <ul>
                <li>Server-side rendering was enabled</li>
                <li>
                  The application was running a version of Qwik prior to 1.19.0
                </li>
                <li>
                  User-controlled data flowed into virtual attributes handled by
                  the vulnerable serialization path
                </li>
              </ul>
              <p>
                This significantly limits the real-world exposure. Most
                applications were not trivially exploitable, and no widespread
                exploitation has been reported.
              </p>

              <h3>What changed in Qwik 1.19.0?</h3>
              <p>
                Qwik 1.19.0 includes a fix that ensures virtual attributes are
                properly handled during SSR serialization. The change is
                internal and does not require application-level code changes.
              </p>
              <p>
                This is a typical example of a framework-level security fix:
                transparent for most developers, but critical to apply.
              </p>

              <div class="rounded-md border border-blue-200 bg-blue-50 p-4">
                <p class="font-semibold">ðŸ“¦ Related release</p>
                <p>
                  This security fix is part of the broader Qwik 1.19.0 release.
                  For a complete overview of performance, SSR, and DX
                  improvements, read:{" "}
                  <Link
                    href="/blog/qwik-1-19/"
                    class="text-blue-700 underline hover:text-blue-900"
                  >
                    Qwik 1.19.0: a quiet but strategic update
                  </Link>
                  .
                </p>
              </div>

              <h3>Do I need to change my code?</h3>
              <p>
                In almost all cases, no. If you are not manually constructing
                unsafe HTML strings or bypassing framework safeguards, updating
                Qwik is sufficient.
              </p>

              <p>
                If your application uses Qwik City for routing, SSR, loaders, or
                actions, make sure to update both <code>@builder.io/qwik</code>{" "}
                and
                <code>@builder.io/qwik-city</code> to keep versions aligned.
              </p>

              <CodeBlock
                code={`# npm
npm install @builder.io/qwik@latest @builder.io/qwik-city@latest

# pnpm
pnpm up @builder.io/qwik @builder.io/qwik-city

# yarn
yarn upgrade @builder.io/qwik @builder.io/qwik-city`}
                language="bash"
                icon="terminal"
                text="Update Qwik and Qwik City to a secure version"
                hideLineNumbers
              />

              <h3>Should I be worried?</h3>
              <p>
                No panic is warranted. The vulnerability was identified,
                documented, and fixed. That is exactly how healthy open-source
                ecosystems operate.
              </p>
              <p>
                The correct response is not fear, but maintenance: keep
                dependencies reasonably up to date and understand what changes
                actually mean.
              </p>

              <h3>What this says about Qwik</h3>
              <p>
                The fact that this vulnerability was publicly tracked, assigned
                a CVE, and fixed without breaking applications is a positive
                signal.
              </p>
              <p>
                Security issues are inevitable in complex systems. Transparent
                handling and timely fixes are what matter.
              </p>

              <ArticleDiscordCallout />

              <h3>Continue learning Qwik</h3>
              <p>
                Understanding how Qwik handles SSR, serialization, and
                resumability helps you reason about both performance and
                security.
              </p>
              <p>
                ðŸ‘‰{" "}
                <Link
                  href="/blog/"
                  class="text-blue-600 underline hover:text-blue-800"
                >
                  Back to the Learn Qwik blog
                </Link>
              </p>
            </article>
          </div>
        </div>

        <BackButton />
        {!isSubscribed && <DesktopStickyAd />}
      </div>

      {!isSubscribed && <MobileStickyAd />}
    </main>
  );
});
